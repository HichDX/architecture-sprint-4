# Логирование: Необходимые логи и системы

## Уровень INFO: 

* Для эффективного логирования в системе компании необходимо собрать логи из следующих систем:
    + Система управления заказами:
        - Изменение статуса заказа: логируем время, идентификатор покупателя, номер заказа, новый статус.
        - Создание заказа: логируем время, идентификатор покупателя, номер заказа, список товаров.
        - Обновление информации о заказе: логируем время, идентификатор заказа, измененные поля.

    + Система обработки платежей:
        - Авторизация платежа: логируем время, идентификатор заказа, статус авторизации, идентификатор платежа.
        - Возврат средств: логируем время, идентификатор заказа, сумма возврата, статус возврата.

    + Система управления запасами:
        - Проверка наличия товара: логируем время, идентификатор товара, статус наличия.
        - Обновление запасов: логируем время, идентификатор товара, количество, новое значение.

    * Система доставки:
        + Создание заказа на доставку: логируем время, идентификатор заказа, адрес доставки, статус.
        + Обновление статуса доставки: логируем время, идентификатор заказа, новый статус доставки.

    * Система уведомлений:
        + Отправка уведомлений клиентам: логируем время, идентификатор клиента, тип уведомления, статус отправки.

## Уровень WARN: 
* Для логирования нестандартных ситуаций, например, если заказ не может быть обработан из-за отсутствия товара.

## Уровень ERROR: 
* Для логирования ошибок, таких как сбой в обработке платежа или проблемы с доставкой.

# Мотивация

* Внедрение логирования в систему необходимо для повышения прозрачности процессов и упрощения диагностики проблем. Это позволит:
    + Ускорить процесс выявления и устранения проблем: Логи помогут быстро находить причины ошибок и нестандартных ситуаций.
    + Улучшить качество обслуживания клиентов: Быстрое реагирование на проблемы повысит удовлетворенность клиентов.
    + Оптимизировать процессы: Анализ логов позволит выявить узкие места и оптимизировать бизнес-процессы.

* Технические и бизнес-метрики:
    + Время на решение инцидентов
    + Количество обращений в службу поддержки
    + Уровень удовлетворенности клиентов
    + Частота возникновения ошибок
    + Время обработки заказов

* Приоритетные системы для логирования и трейсинга:
    + Система управления заказами: критически важна для понимания статуса заказов и выявления проблем.
    + Система обработки платежей: ошибки в этой системе могут привести к финансовым потерям.
    + Система доставки: важна для обеспечения своевременной доставки и удовлетворенности клиентов.

# Предлагаемое решение

* Технологии для реализации логирования:
    + ELK Stack: Elasticsearch будет использоваться для хранения логов, Logstash — для их обработки и передачи, а Kibana — для визуализации и анализа.

* Политика безопасности в отношении логов
    + Работа с чувствительными данными
     - Логи не должны содержать личные данные пользователей или другую чувствительную информацию. Если такие данные необходимо логировать, они должны быть зашифрованы или анонимизированы.
     - Доступ к логам будет ограничен только для авторизованных пользователей, таких как администраторы и разработчики, которые нуждаются в доступе для диагностики и анализа

* Политика хранения логов
    + Логи будут храниться в отдельном индексе в Elasticsearch, что обеспечит удобный доступ и управление.
    + Логи будут храниться в течение 90 дней, после чего будут автоматически удаляться, чтобы избежать переполнения хранилища.
    + Размер индекса будет ограничен до 50 ГБ, чтобы обеспечить оптимальную производительность и управляемость.

# Превращение системы сбора логов в систему анализа логов

* Для превращения системы сбора логов в систему анализа логов необходимо:
    + Настроить алертинг: Установить автоматические уведомления для ключевых событий, таких как ошибки в обработке заказов или платежей, а также аномалии в количестве логируемых событий.
    + Поиск аномалий: Настроить мониторинг на предмет аномалий, например, резкий рост количества созданных заказов, что может указывать на DDoS-атаку или сбой в системе.
    + Регулярный анализ логов: Проводить периодический анализ логов для выявления трендов и проблем, которые могут потребовать внимания.